---
title: "Chapter5"
author: "Elsa Marques"
date: "11/29/2017"
output: html_document
---

# Dimensionality reduction techniques

*This chapter will teach you how to reduce a huge amount of variables (data dimensions) to a smaller and more relevant variables in order to make it easier to visualize and compare different data populations. The key method to reduce the multidimensional data is the principal component analysis (PCA). The multiple correspondence analysis (MCA) and other correspondece analysis (CA) are also covered in this chapter.*

## *About this week working data set "Human"*

  > The 'human' dataset originates from the United Nations Development Programme. See their [data page](http://hdr.undp.org/en/content/human-development-index-hdi) for more information. For a nice overview see also the calculating the human development indices [pdf](http://hdr.undp.org/sites/default/files/hdr2015_technical_notes.pdf).
This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

## **Load the ‘human’ data into R.**

```{r, echo=FALSE}
#Load the data set used in the data wrangling section(from your local drive)
read.csv("human_.csv")
```


### **Explore the structure and the dimensions of the data and describe the dataset briefly.**

```{r, echo=FALSE}
library(dplyr)
str(human_)
dim(human_)
```

 - The brief overview on this data shows that the data "human_" created during the data wrangling exercise comprises 155 observations spread into 8 variables. 
 
 - These observations are selected from a bigger data set of observations included to calculate the human development indices; Different index are used for this purpose, inclding two we merged in the data wrangling exercise (Human Development Index (HDI) & Gender Development Index (GDI))
 
 - Selected factors were:
    - Edu2.FM  = % of population with secondary education (Female and Male); 
    - Labo.FM  = Female and male labour force participation rates;
    - Edu.Exp = Education expectancy;
    - GNI = Gross national income per capita; 
    - Life.Exp = Life expectancy;
    - Mat.Mor = Maternal mortality rate (deaths /100,000 live births);
    - Ado.Birth = Adolescent birth rate; 
    - Parli.F = % of seats taken by female in the parliament
 
## **Show a graphical overview of the data and show summaries of the variables in the data.** 

```{r, echo=FALSE}
library(GGally)
#Visual obervation of the "human_" variables
ggpairs(human_)

# Summarize the "human_" variables
summary(human_)
```

```{r, echo=FALSE}
library(corrplot)
# calculate the correlation matrix and round it
cor_matrix<-cor(human_) %>% round(digits = 2)

# print the correlation matrix
cor_matrix

#visualize it with corrplot
human_ %>% corrplot()
```

- Describe and interpret the outputs, commenting on the distributions of the variables and the relationships between them. (0-2 points)

## **Perform principal component analysis (PCA) on the not standardized human data.**
```{r, echo = FALSE}
# perform principal component analysis (with the SVD method)
pca_human <- prcomp(human_)
pca_human

```


### **Show the variability captured by the principal components.** 

### **Draw a biplot displaying the observations by the first two principal components (PC1 coordinate in x-axis, PC2 coordinate in y-axis), along with arrows representing the original variables.** 

```{r, echo = FALSE}
# create and print out a summary of pca_human
s <- summary(pca_human)
s

# rounded percentages of variance captured by each PC
pca_pr <- round(100*s$importance[2, ], digits = 1)
pca_pr

# create object pc_lab to be used as axis labels
pc_lab <- paste0(names(pca_pr), " (", pca_pr, "%)")
pc_lab

# draw a biplot of the principal component representation and the original variables
biplot(pca_human, choices = 1:2, cex = c(0.2,1), col = c("grey40", "deepblue"))
```

(0-2 points)

## 4. **Standardize the variables in the human data and repeat the above analysis.** 
```{r, echo = FALSE}
# standardize the variables
human_std <- scale(human_)

# print out summaries of the standardized variables
summary(human_std)

# perform principal component analysis (with the SVD method)
pca_human <- prcomp(human_std)

# draw a biplot of the principal component representation and the original variables
biplot(pca_human, choices = 1:2, cex = c(0.2,1), col = c("grey40", "deeppink2"))
```

Interpret the results of both analysis (with and without standardizing). Are the results different? Why or why not? 

Include captions in you plots where you describe the results by using not just your variable names, but the actual phenomenons they relate to. 

(0-4 points)

## 5. **Personal interpretations of the first two principal component dimensions based on the biplot drawn after PCA on the standardized human data.** 


(0-2 points)

## 6. **Load the tea dataset from the package Factominer.**

```{r}
# Load the tea dataset and packages FactoMineR
library(FactoMineR)
data("tea")
```


### 6.1 **Explore the data briefly: look at the structure and the dimensions of the data and visualize it.** 

```{r, echo = FALSE}
# structure and dimensions of the data
str(tea)
dim(tea)
```
 - The data is formed of a total of 36variables with 300 observations. 
 - The data set seems to contain data about when the enquired people drink tea, where they drink tea, how they drink the tea (either the format of the tea they use ("how"), or with some addictives ("How")), whats the price range and the kind of the tea they drink, age and sex of the enquired people.


```{r, echo=FALSE}

#Let's focus on the type of tea , 
# visualize the dataset
gather(tea) %>% ggplot(aes(value)) + facet_wrap("key", scales = "free") + geom_bar() + theme(axis.text.x = element_text(angle = 45, hjust = 1, size = 8)) 
```

### 6.2 **Then do Multiple Correspondence Analysis on the tea data (or to a certain columns of the data, it’s up to you).** 

```{r}
# multiple correspondence analysis
mca <- MCA(tea, graph = FALSE)

# summary of the model
summary(mca)
```


Interpret the results of the MCA and 

### 6.3 **draw at least the variable biplot of the analysis. You can also explore other plotting options for MCA.** 

```{r, echo=FALSE}
# visualize MCA
plot(mca, invisible=c("none"), habillage = "quali")
```


Comment on the output of the plots. (0-4 points)
