---
output: 
  html_document: 
    highlight: monochrome
    toc: yes
---
**Course Diary**

# CHAPTER 2 - Regression and model validation

*During this chapter the amount of information to be memorized is higher and more complex. The datacamp exercise, including the videos included in it touch the surface of what you can do to build graphs to visualize and analyse your data. Note that during this chapter you will definetily need to consult external help cheats (mostly provided during the datacamp and your mooc links)*


**Work done during the week and learning summary.**

1. _**Data wrangling exercise:**_ 

Load the data set:
 
 - All data provided in the url 
 
```{r, echo = FALSE}
#read the data from URL provided link
lrn14 <- read.table("http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS3-data.txt", sep="\t", header=TRUE)
```
  
 - Data after data wrangling exercises (stored locally)
 
```{r, echo = FALSE}
#read the data from file located in your hard drive
learning2014 <- read.csv("learning2014.csv")
```
 
   - Questions related to the following topics were placed together:     
        - deep_questions , surface_questions , strategic_questions 
        

2. _**How to extract information from data:**_

Since the full data set can be overwelming to explore, viewing the structure, summary and the first values of the data can be helpful to identify what are your main interests in this questionary answers. 

```{r, echo = FALSE}
#view the structure and summary of the non filtered "learning2014" data
str(lrn14)
summary(lrn14)
head(lrn14)
```


```{r, echo = FALSE}
#view the structure and summary of the non filtered "learning2014" data
str(learning2014)
summary(learning2014)
head(learning2014)
```

A careful observation of the loaded data shows you that from all the 63 original variables I filtered 7 variables of interest (Gender , Age, Attitude, Points, Deep questions, Surface questions, Strategic questions). 


_**View data in Plots format**_

Graphs to visualize the overall relationshiot betwwen all the selected variables 

```{r, echo = FALSE}
#Draw all possible scatterplots to explore the data frame
library(GGally)
library(ggplot2)
p <- ggpairs(data = learning2014, mapping = aes(col = gender, alpha = 0.3), lower = list(combo = wrap("facethist", bins = 20)))
p
```

With this overview of the date you can already check that mainly in the Attitude varibale the differences between gender are more noticeable; 

From all the variables anlaysed strategic_questions , surface_questions and attitude (mainly the female data) shows normal a distributon, all the other data seems skewed 


- Plot a curve to analyse the correlations between students Attitude and Points 
```{r pressure, echo=FALSE}
# initialize plot with data and aesthetic mapping
p1 <- ggplot(data = learning2014, aes(x = Attitude, y = Points, col = gender))

# define the visualization type (points)
p2 <- p1 + geom_point()

# add a regression line
p3 <- p2 + geom_smooth(method = "lm")
p3
```


```{r}

my_model <- lm(points ~ attitude + stra + age, data = learning2014)

# draw diagnostic plots using the plot() function. Choose the plots 1, 2 and 5
par(mfrow = c(2,2))
plot(my_model2, which =c(1:2, 5)) 
```

```{r}
# learning2014 is available

# Create model object m
m <- lm(points ~ attitude, data = learning2014)

# print out a summary of the model
summary(m)

# New observations
new_attitudes <- c("Mia" = 3.8, "Mike"= 4.4, "Riikka" = 2.2, "Pekka" = 2.9)
new_data <- data.frame(attitude = new_attitudes)


# Print out the new data
(new_data)

# Predict the new students exam points based on attitude
predict(m, newdata = new_data)
```

